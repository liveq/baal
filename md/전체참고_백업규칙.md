# 프로젝트 백업 규칙

## 백업 원칙
작업 전 반드시 롤백 가능한 백업 포인트를 생성하여 안전한 개발 환경 유지

## 백업 대상

### ✅ 포함 (순수 코드)
- **HTML 파일**: `*.html`
- **CSS 파일**: `*.css`, `*.scss`, `*.sass`
- **JavaScript 파일**: `*.js`, `*.jsx`, `*.ts`, `*.tsx`
- **설정 파일**: `package.json`, `tsconfig.json`, `webpack.config.js`
- **이미지/폰트**: 디자인의 일부인 경우 포함
- **문서**: `README.md`, 프로젝트 문서

### ❌ 제외 (자동생성/대용량)
- `node_modules/` - npm 패키지 (package.json으로 복원 가능)
- `dist/`, `build/` - 빌드 결과물
- `.git/` - Git 이력 (별도 관리)
- `.DS_Store`, `Thumbs.db` - 시스템 파일
- `package-lock.json`, `yarn.lock` - 자동생성 파일
- `*.log` - 로그 파일
- `.env` - 환경변수 (보안)

## 백업 방법

### 1. 타임스탬프 생성
```bash
date +%Y%m%d%H%M  # 예: 202509221130
```

### 2. 백업 폴더 구조
```
프로젝트/
├── backup/
│   ├── 202509221032_기능명/  # 첫 번째 백업
│   ├── 202509221130_디자인개선/  # 두 번째 백업
│   └── 202509221500_반응형/  # 세 번째 백업
```

### 3. 백업 명령어
```bash
# 백업 폴더 생성
mkdir -p backup/$(date +%Y%m%d%H%M)_작업명

# 파일 복사
cp index.html style.css script.js backup/202509221130_디자인개선/

# 폴더 전체 복사 (제외 항목 고려)
rsync -av --exclude='node_modules' --exclude='.git' ./ backup/202509221130_전체백업/
```

## 백업 시점

### 필수 백업 시점
1. **대규모 변경 전**: 디자인 전면 개선, 구조 변경
2. **위험한 작업 전**: 삭제, 이동, 리팩토링
3. **배포 전**: 프로덕션 배포 직전
4. **실험적 기능 추가 전**: 테스트가 필요한 새 기능

### 권장 백업 주기
- 일일 작업 종료 시
- 주요 기능 완성 시
- 안정 버전 확보 시

## 롤백 방법

### 전체 롤백
```bash
# 백업에서 복원
cp backup/202509221032_mbti/* ./

# 또는 폴더 전체 복원
rsync -av backup/202509221032_mbti/ ./
```

### 부분 롤백
```bash
# 특정 파일만 복원
cp backup/202509221032_mbti/style.css ./
```

## 백업 관리

### 보관 기간
- **핫 백업**: 최근 3일 (즉시 롤백용)
- **일일 백업**: 1주일
- **마일스톤 백업**: 영구 보관

### 정리 기준
- 성공적으로 배포된 후 1주일 경과
- 더 이상 참조하지 않는 실험적 백업
- 중복되는 백업 (동일 내용)

## 백업 체크리스트

- [ ] 타임스탬프 포함된 폴더명 생성
- [ ] 순수 소스 코드만 선별
- [ ] 백업 폴더에 복사 완료
- [ ] 백업 내용 검증 (파일 개수, 크기)
- [ ] 작업 로그에 백업 정보 기록

## 실제 적용 예시

### MBTI 테스트 백업 (2025-09-22)
```bash
# 1. 타임스탬프 생성
TIMESTAMP=202509221032

# 2. 백업 폴더 생성
mkdir -p mbti-test/backup/${TIMESTAMP}_mbti

# 3. 핵심 파일 백업
cd mbti-test
cp index.html style.css script.js backup/${TIMESTAMP}_mbti/

# 4. 확인
ls -la backup/${TIMESTAMP}_mbti/
```

## 자동화 스크립트

```bash
#!/bin/bash
# backup.sh

PROJECT_NAME=$1
TIMESTAMP=$(date +%Y%m%d%H%M)
BACKUP_DIR="backup/${TIMESTAMP}_${PROJECT_NAME}"

mkdir -p $BACKUP_DIR
cp *.html *.css *.js $BACKUP_DIR/ 2>/dev/null
echo "백업 완료: $BACKUP_DIR"
ls -la $BACKUP_DIR/
```

---

**작성일**: 2025-09-22  
**최종 수정**: 2025-09-22  
**적용 프로젝트**: BAAL 전체