<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¶í•© í…ìŠ¤íŠ¸ ìµœì í™” í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1a1a1a;
            color: #fff;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #444;
            border-radius: 8px;
            background-color: #2a2a2a;
        }
        .test-result {
            margin-top: 15px;
            padding: 15px;
            background-color: #333;
            border-radius: 5px;
            white-space: pre-wrap;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        .text-length {
            color: #ffeb3b;
            font-weight: bold;
        }
        .source-info {
            color: #81c784;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ ë³„ìë¦¬ ê¶í•© í…ìŠ¤íŠ¸ ìµœì í™” í…ŒìŠ¤íŠ¸</h1>

    <div class="test-section">
        <h3>ğŸ“Š í…ŒìŠ¤íŠ¸ ëŒ€ìƒ</h3>
        <p>1. compatibility-data.jsonì˜ compat_message ìš°ì„  ì‚¬ìš©</p>
        <p>2. zodiacDescriptions í´ë°± ì‹œ íŠ¹ì • ë¶€ë¶„ë§Œ ì¶”ì¶œ (300-500ì)</p>
        <p>3. HTML íƒœê·¸ ì œê±° ë° í…ìŠ¤íŠ¸ ì •ë¦¬</p>
    </div>

    <div class="test-section">
        <h3>ğŸ§ª í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤</h3>
        <button onclick="testCompatibility(1, 5)">ì–‘ìë¦¬ â†” ì‚¬ììë¦¬</button>
        <button onclick="testCompatibility(3, 7)">ìŒë‘¥ì´ìë¦¬ â†” ì²œì¹­ìë¦¬</button>
        <button onclick="testCompatibility(4, 8)">ê²Œìë¦¬ â†” ì „ê°ˆìë¦¬</button>
        <button onclick="testCompatibility(2, 6)">í™©ì†Œìë¦¬ â†” ì²˜ë…€ìë¦¬</button>
        <button onclick="testCompatibility(9, 11)">ì‚¬ìˆ˜ìë¦¬ â†” ë¬¼ë³‘ìë¦¬</button>

        <div id="testResult" class="test-result" style="display: none;"></div>
    </div>

    <div class="test-section">
        <h3>ğŸ“ zodiacDescriptions ë¡œë“œ í™•ì¸</h3>
        <button onclick="checkZodiacDescriptions()">ë°ì´í„° êµ¬ì¡° í™•ì¸</button>
        <div id="dataCheck" class="test-result" style="display: none;"></div>
    </div>

    <!-- API ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="zodiac-api-real.js"></script>

    <!-- Mock zodiacDescriptions for testing -->
    <script>
        // zodiacDescriptions í…ŒìŠ¤íŠ¸ ë°ì´í„° (ì‹¤ì œ ë°ì´í„°ì˜ ì¶•ì•½ ë²„ì „)
        window.zodiacDescriptions = {
            1: {
                name: 'ì–‘ìë¦¬',
                compatibility: `
                <div class="compat-section">
                  <h4>â­ ìµœê³ ì˜ ê¶í•© â­</h4>

                  <div class="compat-item">
                    <strong>ğŸ¦ ì‚¬ììë¦¬:</strong>
                    <p>ë¶ˆì˜ í˜•ì œë“¤! ì–‘ìë¦¬ì™€ ì‚¬ììë¦¬ëŠ” ë§ˆì¹˜ ì•¡ì…˜ ì˜í™”ì˜ ì£¼ì¸ê³µ ë“€ì˜¤ ê°™ìŠµë‹ˆë‹¤. ë‘˜ ë‹¤ "ì¼ë‹¨ ì €ì§ˆëŸ¬!"ë¥¼ ì™¸ì¹˜ë©° ëª¨í—˜ì„ ë– ë‚˜ê³ , ì„œë¡œì˜ ì—´ì •ì— ë”ìš± ë¶ˆíƒ€ì˜¤ë¦…ë‹ˆë‹¤. ë°ì´íŠ¸í•  ë•Œë„ "ì˜¤ëŠ˜ ë­ í• ê¹Œ?"ë¼ëŠ” ì§ˆë¬¸ì— ë™ì‹œì— "ìƒˆë¡œìš´ ê³³!"ì´ë¼ê³  ë‹µí•˜ëŠ” ì°°ë–¡ê¶í•©ì…ë‹ˆë‹¤.</p>
                  </div>

                  <div class="compat-item">
                    <strong>ğŸ¹ ì‚¬ìˆ˜ìë¦¬:</strong>
                    <p>ëª¨í—˜ì˜ íŒŒíŠ¸ë„ˆ! ì–‘ìë¦¬ì˜ ìš©ê¸°ì™€ ì‚¬ìˆ˜ìë¦¬ì˜ ììœ ë¡œìš´ ì˜í˜¼ì´ ë§Œë‚˜ ëì—†ëŠ” ëª¨í—˜ì„ ë– ë‚˜ëŠ” ê´€ê³„ì…ë‹ˆë‹¤.</p>
                  </div>
                </div>`
            },
            3: {
                name: 'ìŒë‘¥ì´ìë¦¬',
                compatibility: `â­ <b>ìµœê³ ì˜ ê¶í•©</b> â­

                âš–ï¸ <strong>ì²œì¹­ìë¦¬</strong>: ê³µê¸°ì˜ ìˆ˜ë‹¤ìŸì´ ë“€ì˜¤! ìŒë‘¥ì´ìë¦¬ì™€ ì²œì¹­ìë¦¬ê°€ ë§Œë‚˜ë©´ ì¹´í˜ì—ì„œ 3ì‹œê°„ì„ ì•‰ì•„ìˆì–´ë„ í•  ë§ì´ ëë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤. "ê·¸ëŸ°ë° ë§ì´ì•¼..."ë¡œ ì‹œì‘í•´ì„œ ì˜¨ê°– ì£¼ì œë¡œ ë‚ ì•„ë‹¤ë‹ˆëŠ” ëŒ€í™”ì˜ ë‹¬ì¸ë“¤ì´ì—ìš”.`
            }
        };

        // í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë“¤
        async function testCompatibility(zodiac1, zodiac2) {
            const resultDiv = document.getElementById('testResult');
            resultDiv.style.display = 'block';
            resultDiv.textContent = `ğŸ”„ ${zodiacAPI.zodiacSigns[zodiac1-1].name} â†” ${zodiacAPI.zodiacSigns[zodiac2-1].name} ê¶í•© í™•ì¸ ì¤‘...`;

            try {
                console.log(`=== ${zodiacAPI.zodiacSigns[zodiac1-1].name} â†” ${zodiacAPI.zodiacSigns[zodiac2-1].name} í…ŒìŠ¤íŠ¸ ì‹œì‘ ===`);

                const compatibility = await zodiacAPI.getCompatibility(zodiac1, zodiac2);

                const result = `
âœ¨ í…ŒìŠ¤íŠ¸ ê²°ê³¼: ${zodiacAPI.zodiacSigns[zodiac1-1].name} â†” ${zodiacAPI.zodiacSigns[zodiac2-1].name}

ğŸ“Š ì ìˆ˜ ì •ë³´:
- ì´ì : ${compatibility.totalScore}ì 
- ì• ì •: ${compatibility.scores?.love || 'N/A'}ì 
- ìš°ì •: ${compatibility.scores?.friendship || 'N/A'}ì 
- ì—…ë¬´: ${compatibility.scores?.work || 'N/A'}ì 

ğŸ“ ì„¤ëª… (ê¸¸ì´: ${compatibility.description ? compatibility.description.length : 0}ì):
${compatibility.description || 'ì„¤ëª… ì—†ìŒ'}

ğŸ’¡ ì¡°ì–¸:
${compatibility.advice || 'ì¡°ì–¸ ì—†ìŒ'}

ğŸ” ë°ì´í„° ì†ŒìŠ¤: ${compatibility.source || 'ì•Œ ìˆ˜ ì—†ìŒ'}
                `;

                resultDiv.textContent = result;

                console.log('âœ… í…ŒìŠ¤íŠ¸ ì™„ë£Œ:', compatibility);

            } catch (error) {
                console.error('âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨:', error);
                resultDiv.textContent = `âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}`;
            }
        }

        function checkZodiacDescriptions() {
            const checkDiv = document.getElementById('dataCheck');
            checkDiv.style.display = 'block';

            if (window.zodiacDescriptions) {
                const keys = Object.keys(window.zodiacDescriptions);
                let info = `âœ… zodiacDescriptions ë¡œë“œë¨\n\n`;
                info += `ğŸ“Š í¬í•¨ëœ ë³„ìë¦¬: ${keys.length}ê°œ\n`;

                keys.forEach(key => {
                    const data = window.zodiacDescriptions[key];
                    const compatLength = data.compatibility ? data.compatibility.length : 0;
                    info += `- ${key}ë²ˆ (${data.name}): ê¶í•© í…ìŠ¤íŠ¸ ${compatLength}ì\n`;
                });

                // extractCompatibilityText í•¨ìˆ˜ í…ŒìŠ¤íŠ¸
                info += `\nğŸ§ª í…ìŠ¤íŠ¸ ì¶”ì¶œ í…ŒìŠ¤íŠ¸:\n`;
                const extracted = zodiacAPI.extractCompatibilityText(window.zodiacDescriptions, 1, 5);
                info += `ì–‘ìë¦¬â†’ì‚¬ììë¦¬: ${extracted ? extracted.length + 'ì ì¶”ì¶œë¨' : 'ì¶”ì¶œ ì‹¤íŒ¨'}\n`;
                if (extracted) {
                    info += `ì¶”ì¶œëœ í…ìŠ¤íŠ¸ ë¯¸ë¦¬ë³´ê¸°: "${extracted.substring(0, 100)}..."\n`;
                }

                checkDiv.textContent = info;
            } else {
                checkDiv.textContent = 'âŒ zodiacDescriptions ì—†ìŒ';
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì²´í¬
        window.addEventListener('load', () => {
            console.log('ğŸš€ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            console.log('ğŸ“¦ zodiacAPI ìƒíƒœ:', typeof zodiacAPI);
            console.log('ğŸ“‹ zodiacDescriptions ìƒíƒœ:', typeof window.zodiacDescriptions);

            setTimeout(() => {
                checkZodiacDescriptions();
            }, 1000);
        });
    </script>
</body>
</html>