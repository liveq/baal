# 반응형 그리드 레이아웃 시스템

**작성일:** 2025-10-14
**프로젝트:** BAAL - 띠별운세
**적용 파일:** `zodiac-fortune/index.html`, `style.css`, `script.js`

---

## 📋 목차
1. [개요](#개요)
2. [핵심 기능](#핵심-기능)
3. [CSS 구현](#css-구현)
4. [JavaScript 구현](#javascript-구현)
5. [적용 방법](#적용-방법)
6. [브레이크포인트](#브레이크포인트)

---

## 개요

화면 크기에 따라 자동으로 그리드 레이아웃을 조정하고, 폰트 가독성을 유지하는 완전 반응형 시스템입니다.

### 주요 특징
- ✅ 화면 크기에 따른 그리드 열/행 자동 변경
- ✅ 폰트 크기 가독성 임계점 감지 (14px 미만 방지)
- ✅ 부드러운 크기 조절 (clamp 함수)
- ✅ 중첩 요소(버튼) 자동 재배치

---

## 핵심 기능

### 1. 적응형 그리드 시스템 (Adaptive Grid System)
화면 폭에 따라 그리드 구조가 자동으로 변경됩니다.

```
1200px 이상  → 3행 4열 (12개 카드)
901~1200px   → 4행 3열
769~900px    → 6행 2열
~768px       → 6행 2열 (태블릿)
~480px       → 12행 1열 (모바일)
```

### 2. 유동적 타이포그래피 (Fluid Typography)
`clamp()` 함수로 최소/최대값 사이에서 부드럽게 조절됩니다.

```css
font-size: clamp(최소, 선호값, 최대);
```

### 3. 가독성 임계점 감지
JavaScript가 실시간으로 폰트 크기를 체크하여 14px 이하로 떨어지면 자동으로 레이아웃을 변경합니다.

### 4. 유연한 콘텐츠 래핑
버튼 등 하위 요소도 카드 크기에 맞춰 자동 재배치됩니다.
- 년도 버튼: 1행 4열 → 2행 2열

---

## CSS 구현

### 1. 기본 그리드 설정

```css
/* 메인 그리드 - 반응형 3행 4열 */
.zodiac-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(3, 1fr);
    gap: clamp(0.8rem, 1.2vw, 1.2rem);
    max-width: 1000px;
    margin: 0;
    width: 100%;
}
```

### 2. 카드 스타일 (동적 크기)

```css
.zodiac-card {
    background: var(--bg-primary);
    border-radius: clamp(6px, 0.8vw, 8px);
    padding: clamp(0.8rem, 1.5vw, 1.2rem);
    text-align: center;
    border: 1px solid var(--border-light);
    transition: all 0.2s ease;
    position: relative;
    cursor: pointer;
    min-height: 180px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-width: 0; /* 중요: Grid 오버플로우 방지 */
}
```

### 3. 폰트 크기 (clamp 사용)

```css
/* 카드 아이콘 */
.card-icon {
    font-size: clamp(1.8rem, 2.5vw, 2.5rem);
    margin-bottom: clamp(0.2rem, 0.5vw, 0.4rem);
}

/* 카드 제목 */
.zodiac-card h3 {
    font-size: clamp(0.9rem, 1.2vw, 1.1rem);
    margin-bottom: clamp(0.2rem, 0.4vw, 0.3rem);
    font-weight: 600;
}
```

### 4. 미디어 쿼리 브레이크포인트

```css
/* 중간 화면 - 4행 3열로 전환 */
@media (max-width: 1200px) and (min-width: 901px) {
    .zodiac-grid {
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(4, 1fr);
    }
}

/* 작은 화면 - 6행 2열로 전환 */
@media (max-width: 900px) and (min-width: 769px) {
    .zodiac-grid {
        grid-template-columns: repeat(2, 1fr);
        grid-template-rows: repeat(6, 1fr);
    }
}

/* 태블릿 - 6행 2열 */
@media (max-width: 768px) {
    .zodiac-grid {
        grid-template-columns: repeat(2, 1fr);
        grid-template-rows: repeat(6, 1fr);
        gap: 1rem;
    }
}

/* 모바일 - 12행 1열 */
@media (max-width: 480px) {
    .zodiac-grid {
        grid-template-columns: 1fr;
        grid-template-rows: repeat(12, 1fr);
        gap: 0.8rem;
    }
}
```

### 5. 하위 요소 (년도 버튼) 재배치

```css
/* 년도 버튼 - 기본 1행 4열 */
.year-buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 5px;
    margin: 10px 0;
}

/* 카드가 좁을 때 2행 2열로 */
@media (max-width: 900px) {
    .year-buttons {
        grid-template-columns: repeat(2, 1fr);
    }
}
```

---

## JavaScript 구현

### 실시간 가독성 감지 함수

```javascript
/**
 * 반응형 레이아웃 실시간 감지 및 조정
 */
function initResponsiveLayout() {
    console.log('🚀 initResponsiveLayout 함수 시작!');
    const zodiacGrid = document.querySelector('.zodiac-grid');
    if (!zodiacGrid) {
        console.error('❌ .zodiac-grid 요소를 찾을 수 없습니다!');
        return;
    }
    console.log('✅ .zodiac-grid 요소 찾음:', zodiacGrid);

    function adjustLayout() {
        const width = window.innerWidth;
        const cards = zodiacGrid.querySelectorAll('.zodiac-card');

        if (cards.length === 0) return;

        // 첫 번째 카드의 실제 크기 측정
        const card = cards[0];
        const cardWidth = card.offsetWidth;
        const h3 = card.querySelector('h3');

        if (h3) {
            const fontSize = parseFloat(window.getComputedStyle(h3).fontSize);

            // 폰트가 14px 이하로 떨어지면 레이아웃 강제 변경
            if (width > 768 && fontSize < 14 && cardWidth < 220) {
                console.log(`⚠️ 가독성 임계점 도달! 폰트: ${fontSize.toFixed(1)}px, 카드 너비: ${cardWidth}px`);

                // CSS 미디어 쿼리가 처리하지 못한 경우 JS로 강제 조정
                if (width > 1200) {
                    zodiacGrid.style.gridTemplateColumns = 'repeat(3, 1fr)';
                    zodiacGrid.style.gridTemplateRows = 'repeat(4, 1fr)';
                } else if (width > 900) {
                    zodiacGrid.style.gridTemplateColumns = 'repeat(2, 1fr)';
                    zodiacGrid.style.gridTemplateRows = 'repeat(6, 1fr)';
                }
            } else if (width > 1200) {
                // 큰 화면에서는 원래 레이아웃 복원
                zodiacGrid.style.gridTemplateColumns = '';
                zodiacGrid.style.gridTemplateRows = '';
            }

            console.log(`📊 현재: ${width}px | 카드: ${cardWidth}px | 폰트: ${fontSize.toFixed(1)}px`);
        }
    }

    // 초기 실행
    adjustLayout();

    // 리사이즈 이벤트 (디바운스)
    let resizeTimer;
    window.addEventListener('resize', function() {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(adjustLayout, 250);
    });
}

// DOMContentLoaded에서 초기화
document.addEventListener('DOMContentLoaded', function() {
    // ... 기존 초기화 코드 ...

    // 반응형 레이아웃 초기화
    setTimeout(initResponsiveLayout, 100);
});
```

---

## 적용 방법

### 1. HTML 구조
인라인 스타일 제거 (CSS에서만 제어):

```html
<!-- ❌ 잘못된 방법 -->
<div class="zodiac-grid" style="max-width: 1000px; margin: 0;">

<!-- ✅ 올바른 방법 -->
<div class="zodiac-grid">
```

### 2. CSS 적용
위의 CSS 코드를 스타일시트에 추가합니다.

### 3. JavaScript 적용
`initResponsiveLayout()` 함수를 복사하고 `DOMContentLoaded` 이벤트에서 호출합니다.

### 4. 테스트
브라우저 창 크기를 조절하면서:
1. 콘솔에서 로그 확인 (`📊 현재: ...`)
2. 그리드 레이아웃 변경 확인
3. 폰트 가독성 유지 확인

---

## 브레이크포인트

| 화면 크기 | 그리드 구조 | 용도 |
|----------|------------|------|
| 1920px+ | 3행 4열 | 큰 데스크톱 |
| 1201~1919px | 3행 4열 (자동 축소) | 일반 데스크톱 |
| 901~1200px | 4행 3열 | 작은 데스크톱 / 큰 태블릿 |
| 769~900px | 6행 2열 | 태블릿 가로 |
| 481~768px | 6행 2열 | 태블릿 세로 |
| ~480px | 12행 1열 | 모바일 |

---

## 주의사항

### ❌ 하지 말아야 할 것
1. HTML에 인라인 스타일 추가하지 않기
2. `!important` 남용하지 않기
3. 너무 많은 브레이크포인트 추가하지 않기

### ✅ 권장사항
1. `clamp()` 함수 적극 활용
2. `min-width: 0` 추가로 Grid 오버플로우 방지
3. 디바운스로 성능 최적화 (250ms)
4. 콘솔 로그로 디버깅

---

## 다른 프로젝트 적용 시

### 1. 그리드 아이템 개수 조정
12개가 아닌 경우 행/열 수를 조정하세요:

```css
/* 예: 9개 아이템 */
.grid {
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
}
```

### 2. 클래스명 변경
`.zodiac-grid`, `.zodiac-card` 등을 프로젝트에 맞게 변경하세요.

### 3. 브레이크포인트 커스터마이징
프로젝트 특성에 맞춰 조정하세요:

```css
@media (max-width: 1440px) { /* 맞춤 값 */ }
```

### 4. JavaScript 선택자 수정
```javascript
const grid = document.querySelector('.your-grid-class');
const items = grid.querySelectorAll('.your-item-class');
```

---

## 결과

✅ 모든 화면 크기에서 최적의 레이아웃
✅ 항상 가독 가능한 폰트 크기 유지
✅ 부드럽고 자연스러운 전환
✅ GitHub Pages 호환 (순수 CSS + JS)

---

**작성자:** Claude Code
**최종 수정:** 2025-10-14
